# @author UlexZhong

echo "create project start..."

#check project name 
if [ -d "$1" ]; then
echo "The project \"$1\" had exists, you must use another name"
echo "create project fail !"
exit 0
fi

TEMPLATE_PROJECT_NAME="Template"
TEMPLATE_PROJECT_LOW_NAME=$(echo $TEMPLATE_PROJECT_NAME|sed 'y/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/')

#create a new project
mkdir $1

#build new project file from template project
cp -r $TEMPLATE_PROJECT_NAME/* $1

#get lowercase project name
var=$(echo $1|sed 'y/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/')

#rename file name
echo "rename file name"
mv $1/app/src/main/java/com/dtspread/apps/$TEMPLATE_PROJECT_LOW_NAME $1/app/src/main/java/com/dtspread/apps/$var

#replace application name
echo "replace application name"
sed -i "s/$TEMPLATE_PROJECT_NAME/$1/g" `grep $TEMPLATE_PROJECT_NAME -rl $1/app`

#replace application package name
echo "replace application package name"
sed -i "s/com.dtspread.apps.$TEMPLATE_PROJECT_LOW_NAME/com.dtspreads.apps.$var/g" `grep com.dtspread.apps.$TEMPLATE_PROJECT_LOW_NAME -rl $1/app`

echo "All has been done !"
